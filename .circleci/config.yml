version: 2
jobs:
  fetch_dart:
    docker:
      - image: google/dart
    steps:
      - checkout

  build_mobx:
    docker:
      - image: google/dart
    requires: fetch_dart
    environment:
      - PACKAGE: mobx
    steps:
      - run: tool/circle_run.sh

  build_mobx_codegen:
    docker:
      - image: google/dart
    requires:
      - fetch_dart
    environment:
      - PACKAGE: mobx_codegen
    steps:
      - run: tool/circle_run.sh

  build_mobx_codegen_example:
    docker:
      - image: google/dart
    requires:
      - fetch_dart
    environment:
      - PACKAGE: mobx_codegen/example
    steps:
      - run: tool/circle_run.sh

workflows:
  version: 2
  mobx_core:
    jobs:
      - build_mobx
      - build_mobx_codegen
      - build_mobx_codegen_example